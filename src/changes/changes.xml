<?xml version="1.0" encoding="UTF-8"?>

<document>
	<properties>
		<title>Change log</title>
		<author email="eoulsan@biologie.ens.fr">
			The Eoulsan team
		</author>
	</properties>
	<body>

		<!--release version="0.1" description="First release" date="2010-03-01">
			<action dev="jourdren" type="add">
				Import data in hdfs.
			</action>
			<action dev="jourdren" type="add">
				Filter reads.
			</action>
			<action dev="jourdren" type="add">
				Map reads.
			</action>
			<action dev="jourdren" type="add">
                First release.
            </action>
		</release>

		<release version="0.2" description="" date="2010-06-16">
            <action dev="mbernard" type="fix">
                Fix R anadif script.
            </action>
        </release>

        <release version="0.3" description="" date="2010-07-07">
            <action dev="mbernard" type="fix">
                Check read and quality length in ReadSequence.
            </action>
            <action dev="mbernard" type="fix">
                Fix R anadiff script.
            </action>
            <action dev="jourdren" type="add">
                TFQ format support in distributed mode.
            </action>
            <action dev="jourdren" type="add">
                Upload of compressed FASTQ files on HDFS.
            </action>
            <action dev="jourdren" type="fix">
                Fix FASTQ parsing in local mode.
            </action>
            <action dev="jourdren" type="fix">
                Fix trim sequence when sequence contains only 'N' nucleotides.
            </action>
        </release>

         <release version="0.4" description="" date="2010-07-28">
            <action dev="jourdren" type="fix">
                Bad counter names in filter samples.
            </action>

            <action dev="jourdren" type="add">
                DESeq modules installation documentation.
            </action>

            <action dev="mbernard" type="fix">
                Fix R anadiff code.
            </action>

         </release>

         <release version="0.5" description="" date="2011-01-07">
            <action dev="jourdren" type="fix">
                Integer division was used in mean quality computation.
            </action>
         </release-->

         <release version="1.0" description="" date="2011-03-11">
            <action dev="jourdren" type="update">
                1.0 version.
            </action>
         </release>

          <release version="1.0.1" description="" date="2011-03-17">
            <action dev="jourdren" type="update">
                Documentation update and copyrights.
            </action>
            <action dev="jourdren" type="fix">
                In Expression computaion in local mode, remove SAM header from the list of accepted values.
            </action>
            <action dev="jourdren" type="add">
                Reads mapper can now generate SAM header from the list of the chromosomes.
            </action>
            <action dev="jourdren" type="fix">
                Keep the order the chromsomes for SAM header.
            </action>
            <action dev="jourdren" type="update">
                In filtersam step in local mode, now use picard library to read and write SAM files.
            </action>
            <action dev="jourdren" type="update">
                Remove unused packages.
            </action>
            <action dev="jourdren" type="update">
                Major Update of API: In Step, the configure() method don't need now globals
                parameters. The globals parameters are now the settings.
            </action>
            <action dev="jourdren" type="fix">
                In local expression computation step, now use the path of temporary directory in Settings.
            </action>
            <action dev="jourdren" type="fix">
                In expression computation, the ends of the alignments was 1 base too long.
            </action>
         </release>


         <release version="1.0.2" description="" date="2011-04-15">

            <action dev="jourdren" type="update">
                Documentation update.
            </action>
            <action dev="jourdren" type="fix">
                Fix bug in Expression computation when chromosome is not set in annotation.
            </action>
         </release>

         <release version="1.0.3" description="" date="2011-04-18">

            <action dev="jourdren" type="fix">
                Use now temporary directory defined in parameter file for genome indexing and reads mapping in local mode.
            </action>
         </release>

         <release version="1.0.4" description="" date="2011-04-19">

            <action dev="jourdren" type="fix">
                Anadiff step was not found.
            </action>
         </release>

         <release version="1.0.5" description="" date="2011-04-26">

            <action dev="jourdren" type="fix">
                Now use Bowtie read mapper with "--phred64-quals" as default argument.
            </action>
             <action dev="jourdren" type="update">
                Rename anadiff step to diffana.
            </action>
            <action dev="jourdren" type="update">
                Update documentation.
            </action>
         </release>

         <release version="1.0.6" description="" date="2011-04-28">

            <action dev="jourdren" type="update">
                In the createdesign command : Prevent adding compressed genome
                to design file and overwrite existing design file. Creation of
                the design fails if a file in the arguments does not exist.
            </action>
             <action dev="jourdren" type="update">
                Update documentation.
            </action>
         </release>

         <release version="1.0.7" description="" date="2011-04-28">

            <action dev="jourdren" type="update">
                Don't start an analysis with compressed genome or annotation in the design file.
            </action>
             <action dev="jourdren" type="update">
                Update documentation.
            </action>
         </release>

         <release version="1.0.8" description="" date="2011-05-04">

            <action dev="jourdren" type="update">
                Change the name of the keys for AWS keys in configuration file or global section of the parameter file.
            </action>
            <action dev="jourdren" type="fix">
                The path to AWS log can be omited.
            </action>
             <action dev="jourdren" type="update">
                Update documentation.
            </action>
         </release>

         <release version="1.0.9" description="" date="2011-05-05">

            <action dev="jourdren" type="fix">
                Bug in workflow when checking existing input files.
            </action>
            <action dev="jourdren" type="fix">
                Fix the number of required arguments for awsexec command.
            </action>
            <action dev="jourdren" type="fix">
                In awsexec s3:// url works now like s3n:// url.
            </action>
             <action dev="jourdren" type="update">
                Update documentation.
            </action>
         </release>

         <release version="1.0.10" description="" date="2011-05-05">

            <action dev="jourdren" type="fix">
                Don't prevent usage of compressed annotation and genome files in distributed mode.
            </action>
             <action dev="jourdren" type="update">
                Update documentation.
            </action>
         </release>

         <release version="1.0.11" description="" date="2011-05-06">

            <action dev="jourdren" type="fix">
                Only create debug files in debug mode in distributed mode.
            </action>
             <action dev="jourdren" type="update">
                Update Quickstart documentation.
            </action>
         </release>

         <release version="1.1" description="Eoulsan 1.1 release" date="2012-02-05">

            <action dev="jourdren" type="fix" issue="7">
               Fix: OutOfMemoryError exception in awsmode on hadoop master node with mouse genome in _genomedescgenerator step.
            </action>
            <action dev="jourdren" type="fix" issue="5">
               Fix: _genericindexgenerator step fail when the name of the genome is "genome.fasta.bz2".
            </action>
            <action dev="jourdren" type="add">
                Add new steps to compute alignments using gsnap and gmap.
            </action>
            <action dev="jourdren" type="add">
                Add support far all FASTQ formats.
                Add a new column in design file (FastqFormat) to define the FASTQ format to use.
                Warning default FASTQ format is now sanger. This default value can be set with phred.offset.default key.
            </action>
            <action dev="jourdren" type="add">
                The filterreads and filtersam steps are now multi-threaded in local mode.
            </action>
            <action dev="jourdren" type="add">
                Support for annotation and genome compressed files (in gzip or bzip2).
            </action>
            <action dev="jourdren" type="add">
                The createdesign command can now generate an Eoulsan design file from a Casava design file.
                This command can also create synbolic links for input files in the directory of the output design file.
            </action>
            <action dev="jourdren" type="add">
                Add genome mapper index storage.
            </action>
            <action dev="jourdren" type="add">
                Add genome and annotation storages and protocols (genome:// and annotation://).
            </action>
            <action dev="jourdren" type="add">
                Genome FASTA sequences can now be automatically extracted from GFF3 files.
            </action>
            <action dev="jourdren" type="add">
                Add experimental S3 multipart upload to S3DataProtocol.
            </action>
            <action dev="jourdren" type="update">
                For easier opening of the expression file with Microsoft Excel under Mac OS X,
                the extension of the output of the expression step is now ".tsv" and the name of the first column is renamed from "ID" to "Id".
            </action>
            <action dev="jourdren" type="fix">
                All the local steps use the temporary directory path define with the global parameter "main.tmp.dir" .
            </action>
            <action dev="jourdren" type="add">
                New framework in the the bio package to filter alignments. This framework is not currently used in filtersam step.
            </action>
            <action dev="jourdren" type="add">
                New framework in the bio package to filter reads. This framework allows plug-ins for the filterreads step.
                Add a new read filter based on Illumina filter flag in reads ids.
            </action>
             <action dev="jourdren" type="add">
                Support for Casava 1.8 FASTQ ids parsing.
            </action>
            <action dev="jourdren" type="add">
                The Sequence class can now handle IUPAC RNA and DNA alphabets.
            </action>
            <action dev="jourdren" type="add">
               New package for read, write and handling files generated by Illumina software (e.g. Cavasa designs, RTA logs...).
            </action>
            <action dev="jourdren" type="fix">
               Many fixes in the Worflow class.
            </action>
            <action dev="jourdren" type="add">
                Experimental support for paired-end FASTQ files in filterreads and mapreads steps (for some mappers only).
            </action>
            <action dev="jourdren" type="update">
                Update documentation and a add a tutorial about writing a step plug-in.
            </action>

         </release>

         <release version="1.1.1" description="Eoulsan 1.1.1 release" date="2012-04-17">
            <action dev="jourdren" type="fix" issue="13">
                In distributed mode in mapping step, if temporary directory does not exist, create it.
            </action>
            <action dev="jourdren" type="fix">
                Fix bug in expression computation.
            </action>
             <action dev="jourdren" type="fix" issue="12">
                Fix: The number of alignment with more than one match filtered in
filtersam step log is lower than the number of alignements filtered.
            </action>
         </release>

         <release version="1.1.2" description="Eoulsan 1.1.2 release" date="2012-05-12">
            <action dev="jourdren" type="fix" issue="14">
                In local mode in filter alignement step, the unique alignment written was not the
unique alignment but the next alignment to proceed.
            </action>
	     </release>

	     <release version="1.1.3" description="Eoulsan 1.1.3 release" date="2012-05-14">
            <action dev="jourdren" type="fix" issue="15">
                The order of the parameter steps was not retained.
            </action>
            <action dev="jourdren" type="update">
                In hadoop mode now for reads filter, show in reporters the count
of reads that reject each filter like in local mode.
            </action>
         </release>

         <release version="1.1.4" description="Eoulsan 1.1.4 release" date="2012-05-29">
            <action dev="jourdren" type="fix" issue="16">
                Fix out of memory in expression step in local mode with big sam files.
            </action>
            <action dev="jourdren" type="update">
                Update documentation: Eoulsan application note is now publish in Bioinformatics.
            </action>
         </release>

         <release version="1.1.5" description="Eoulsan 1.1.5 release" date="2012-06-21">
            <action dev="jourdren" type="fix" issue="17">
                Genome files created from GFF files only contains the first chromosome.
            </action>
            <action dev="jourdren" type="fix" issue="18">
                The _genericindexgenerator step fail when the genome was extracted from a GFF file.
            </action>
         </release>

         <release version="1.1.6" description="Eoulsan 1.1.6 release" date="2012-06-26">
            <action dev="jourdren" type="fix" issue="19">
                The create design action did not add genome:// or annotation:// file in design file if the URL contains '.' character.
            </action>
            <action dev="jourdren" type="fix" issue="20">
                The illuminaid filter in filterreads step reject all the reads with ids that contains index sequence with nucleotide 'N'.
            </action>
         </release>

         <release version="1.2" description="Eoulsan 1.2 release" date="2013-02-23">
            <action dev="wallon" type="add">
                Add the paired-end mode in the alignments filtering step.
            </action>
            <action dev="wallon" type="add">
                Add the mapping quality score filter in the alignments filtering step.
            </action>
            <action dev="wallon" type="update">
                Update documentation.
            </action>
            <action dev="wallon" type="add">
                The expression estimation step is now modular.
            </action>
            <action dev="wallon" type="add">
                Add the HTSeq-count program for the expression estimation step.
            </action>
            <action dev="jourdren" type="update">
                Variables and shell expressions can be evaluated in the parameter file.
                This file can also now contains a "constants" section.
            </action>
            <action dev="jourdren" type="add">
                Add a genome description storage to speed up the startup of analysis and avoid multiple genome sequence parsing.
            </action>
            <action dev="jourdren" type="update">
                The "awsexec" command is renamed to "emrexec".
            </action>
            <action dev="jourdren" type="add">
                Eoulsan can now send mail to inform user of the end of the analysis.
            </action>
            <action dev="jourdren" type="add">
                Datatypes and dataformat can now defined in XML files.
            </action>
            <action dev="jourdren" type="update">
                Generated SAM files in Hadoop mode now contains SAM headers.
            </action>
            <action dev="deshaies" type="add">
                Differential analysis and normalization steps can be executed on an Rserve server.
            </action>
            <action dev="deshaies" type="update">
                Update the differential analysis and normalization steps with a new version of DESeq.
            </action>
            <action dev="jourdren" type="add">
                New mappers for mapping step: Bowtie2 and gsmap.
            </action>
            <action dev="jourdren" type="update">
                Remove gsnap and gmap standalone step.
            </action>
            <action dev="jourdren" type="add">
                Add a constant section in the parameter file.
            </action>
         </release>

         <release version="1.2.1" description="Eoulsan 1.2.1 release" date="2013-03-01">
            <action dev="jourdren" type="update">
                Add new configuration options for launching AWS EMR clusters
                (enabling debugging mode, EC2 key pair key to enable ssh connection to remote cluster
                and setting the maximal number of mapper tasks in a task tracker).
            </action>
            <action dev="jourdren" type="update">
                Enable a new locker for the reads mapping step in Hadoop mode that avoid to limit
                the number of maximal mapper tasks of a tasktracker to 2.
            </action>
            <action dev="jourdren" type="update">
                The default Hadoop version in AWS Elastic MapReduce mode is now 1.0.3.
            </action>
            <action dev="jourdren" type="fix" issue="22">
                The order of the reads filters in parameter file is not the order the filter apply on the reads.
            </action>
            <action dev="jourdren" type="update">
                In createdesign command, rename some command line option. Warning: -s is now for the path to the samplesheet and -l is for creating symbolic links.
            </action>
         </release>

         <release version="1.2.2" description="Eoulsan 1.2.2 release" date="2013-03-01">
            <action dev="jourdren" type="fix">
                Fix malformed sample parameter file param-local.xml
            </action>
         </release>

         <release version="2.0-alpha1" description="Eoulsan 2.0-alpha1 release" date="2014-09-24">

            <action dev="jourdren" type="fix">
                In createdesign action fix the --paired-end option that was not working.
            </action>

            <action dev="jourdren" type="add">
                Add a new workflow engine to Eoulsan. Each step have now input and output ports. The user in the workflow file
                can now define for each step which step output port to use as source of data for an input port.
                The workflow engine use now data objects to represent data used by step. A data object can only contains element(s) of the same format.
                At the begining of a step, the worklow engine create a cartesian product between all input data
                to create step tasks. The tasks are then executed by a task scheduler.
            </action>

            <action dev="jourdren" type="add">
                Each step can now define if inputs are required in the working directory. If needed, a step is automaticaly
                added to copy required data to working directory before executing the step.
            </action>

            <action dev="jourdren" type="add">
                Each step can now define if it allow compressed data as input and can also define the compression of output data.
                If needed, a step is automaticaly added to uncompress data to working directory before executing the step.
            </action>

            <action dev="jourdren" type="add">
                Each step can now define if a log file must be created for the step. Each step has now a dedicated log file.
            </action>

            <action dev="jourdren" type="add">
                The "discardouput" attribute of the step tag in the workflow file allow to keep or not keep intermediate files of the worklow.
            </action>

            <action dev="jourdren" type="add">
                The format of the step result file has changed to JSON format. Add a configuration setting to also save the step result file in the old Eoulsan format.
            </action>

            <action dev="jourdren" type="add">
                Add the first parts of the code required for clusterexec action.
            </action>

            <action dev="jourdren" type="add">
                With the new workflow engine, the naming of the output files of the steps has changed.
            </action>

            <action dev="jourdren" type="add">
                Each data object contains metadata in addition to files. Add a storage for file metadata in a ".eoulsanmetadata" file in the workflow output directory.
            </action>

            <action dev="jourdren" type="add">
                Data of the workflow can be splitted in small chucks (and then merged) to achieve distributed computation on a non-hadoop cluster.
            </action>

            <action dev="jourdren" type="add">
                Use a new class called ServiceNameLoader instead of the Java standard ServiceLoader to load plugins.
            </action>

            <action dev="jourdren" type="add">
                Log are now buffered to avoid log print before the end of the parsing of the command line in exec action.
            </action>

            <action dev="jourdren" type="add">
                Add a new class EoulsanLogger dedicated to Logging. This class allow to rename the logger and usage of several
                log files against the thread group that call the EoulsanLogger.getLogger() method.
            </action>

            <action dev="jourdren" type="add">
                The design file and the workflow files are now copied in logs directory.
            </action>

            <action dev="jourdren" type="add">
                The log directory now contains the "working" and "task" subdirectories.
            </action>

            <action dev="jourdren" type="add">
                New Built-in variables are available in workflow file: job.id, job.uuid and logs.path.
            </action>

            <action dev="jourdren" type="add">
                Add a step dedicated to launch checker: CheckerStep.
            </action>

            <action dev="jourdren" type="add">
                The parameter file is now called workflow file.
            </action>

            <action dev="jourdren" type="add">
                Now each step write its output in a working directory. Against the workflow and Eoulsan mode, this working directory can be
                the local working directory (where data is removed at the end of the workflow), the Hadoop working directory (on HDFS) or the output directory.
            </action>

            <action dev="jourdren" type="add">
                The DataType concept no more exists in Eoulsan, there is now only DataFormats.
            </action>

            <action dev="jourdren" type="add">
                DataFile can now (if the protocol support it) create symbolic links, delete files, create and list directories.
            </action>

            <action dev="jourdren" type="add">
                A new locker for the reads mapping step in Hadoop mode is now used. It is
                based on Zookeeper and is very stable.
            </action>

            <action dev="jourdren" type="add">
                Add Eclipse code formatter policy file for Eoulsan and an additional dictionary for words used in Eoulsan code.
            </action>

            <action dev="jourdren" type="add">
                Eoulsan plugin path, JVM memory and option can be configured using environment variables.
            </action>

            <action dev="jourdren" type="add">
                Eoulsan now require Java 7.
            </action>

            <action dev="jourdren" type="add">
                Add a user interface (UI) API. This API is not stable will change in the next versions of Eoulsan. There is currently 3 available UI: "basic" (the default UI),
                "no" (that do nothing) and the experimental "lanterna".
            </action>

            <action dev="sperrin" type="add">
                Integration tests engine has been added to ensure Eoulsan results consistancy across versions. This integration tests
                can be run from maven or using the Eoulsan "it" action. To perform this tests, Eoulsan use the TestNG library.
            </action>

            <action dev="jourdren" type="add">
                Support for multiple versions of a mapper. User can now set the mapper version to use in Eoulsan workflow file.
            </action>

            <action dev="jourdren" type="update">
                The code for launching mappers and parse mappers output has been rewritten.
            </action>

            <action dev="jourdren" type="update">
                Start of porting Eoulsan Hadoop mode to Hadoop 2.x. The Eoulsan Hadoop mode currently not works.
            </action>

         </release>

         <release version="2.0-alpha2" description="Eoulsan 2.0-alpha2 release" date="2014-12-02">

            <action dev="jourdren" type="fix">
                Various fixes in  the workflow engine when use skipped steps.
            </action>

            <action dev="jourdren" type="fix">
                Fix createdesign bug when trying to discover the format of the input files.
            </action>

            <action dev="jourdren" type="add">
                Add a new sam2bam step. This new step currently only works in local mode.
            </action>

            <action dev="jourdren" type="add">
                Add a new step: expressionresultsannotation. This new step allow to add additional annotations to expression files and generate files in TSV, ODS or XLSX formats.
            </action>

            <action dev="jourdren" type="add">
                Add a new step: diffanaresultsannotation. This new step allow to add additional annotations to differential analysis files and generate files in TSV, ODS or XLSX formats.
            </action>

            <action dev="jourdren" type="add">
                Add a new storage protocol for additionnal annotations.
            </action>

            <action dev="jourdren" type="update">
                Add a new column named "AdditionalAnnotation" in the design file for the additional annotations of the genome.
            </action>

            <action dev="jourdren" type="add">
                Add a new shell step. This step allow to execute a shell command.
            </action>

            <action dev="jourdren" type="update">
                Eoulsan now use now a new instance of each step when running a step task.
            </action>

            <action dev="jourdren" type="update">
                Several updates to make Eoulsan works in an Hadoop 2.0 cluster. Work still in progress.
            </action>

            <action dev="jourdren" type="update">
                Developers can now define in Eoulsan SPI classes the classes that must not be loaded.
            </action>

            <action dev="sperrin" type="update">
                Add several enhancements to the Eoulsan integration tests engine.
            </action>

            <action dev="jourdren" type="update">
                Update of the CSS of the website, and update the main page of the website (e.g. add a screencast).
            </action>

            <action dev="jourdren" type="add">
                Add a dedicated eoulsan-docker.sh script that automatically configure Docker environment like Eoulsan resources mounts.
            </action>

            <action dev="jourdren" type="add">
                Eoulsan now use Maven 3 for building binaries and website.
            </action>

            <action dev="jourdren" type="update">
                Many clean up of Eoulsan code. Eoulsan now use the new features of Java 7.
            </action>

         </release>

         <release version="2.0-alpha3" description="Eoulsan 2.0-alpha3 release" date="2014-12-05">

            <action dev="jourdren" type="fix">
                Fix Dockerfile URL to download Eoulsan.
            </action>

         </release>

         <release version="2.0-alpha4" description="Eoulsan 2.0-alpha4 release" date="TBD">

            <action dev="jourdren" type="fix">
                Fix HTSeq-count bug when an attribute in GFF3 file contains multiple parents. To use this fix,
                you must enable the "splitattributevalues" parameter in the expression step.
            </action>

            <action dev="jourdren" type="fix">
                When the identifier of a step was not equals to the step name, the step parameters where empty.
            </action>

            <action dev="jourdren" type="fix">
                Fix small issues in the workflow engine (step execution order, add an uncompression step when required, skip generators steps when only required only skipped steps).
            </action>

           <action dev="jourdren" type="fix">
                Fix many bugs in SOAP mapper wrapper.
            </action>

            <action dev="sperrin" type="fix">
                Fix some issues in the integration tests engine.
            </action>

            <action dev="jourdren" type="update">
                The create design action can now handle additional annotations.
            </action>

            <action dev="jourdren" type="update">
                The mapper step and the Eoulsan mapper API can now handle several versions and flavors (e.g. long index) of a mapper.
            </action>

            <action dev="jourdren" type="update">
                Add new binary versions for bowtie (1.1.1), bowtie2 (2.2.4), BWA (0.7.10) and GSNAP (2014-10-20).
                The scripts to generate this binaries has also been added to Eoulsan sources.
            </action>

            <action dev="jourdren" type="add">
                Add a new mapper: STAR 2.4.0h. A new step named "starindexgenerator" allow to create custom index for STAR (e.g. with a GFF3 file as parameter)
                like STAR genomeGenerate command.
            </action>

            <action dev="sperrin" type="add">
                Add new Eoulsan step for FastQC.
            </action>

         </release>

	</body>
</document>
