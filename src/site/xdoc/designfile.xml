<?xml version="1.0" encoding="UTF-8"?>
<!-- 
/*
 *                  Eoulsan development code
 *
 * This code may be freely distributed and modified under the
 * terms of the GNU Lesser General Public License version 2.1 or
 * later and CeCILL-C. This should be distributed with the code.
 * If you do not have a copy, see:
 *
 *      http://www.gnu.org/licenses/lgpl-2.1.txt
 *      http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.txt
 *
 * Copyright for this code is held jointly by the Genomic platform
 * of the Institut de Biologie de l'École Normale Supérieure and
 * the individual authors. These should be listed in @author doc
 * comments.
 *
 * For more information on the Eoulsan project and its aims,
 * or to join the Eoulsan Google group, visit the home page
 * at:
 *
 *      http://www.transcriptome.ens.fr/eoulsan
 *
 */
-->
<document> 

  <properties>
    <title>Design file</title>
    <author email="jourdren@biologie.ens.fr">Laurent Jourdren</author> 
  </properties> 



  <body>
  
    <section name="Design file">

      <p>The design file is the main element of the pipeline. It contains all informations and descriptions of the experiment. It is a simple tabuled plain text file inspired by limma design file. Here is a sample of design file:</p>
      
<source>
SampleNumber	Name	Reads	Genome	Annotation	FastqFormat	Condition	ReplicateType
1	s1	s1.fq	mouse_build37.fasta	mouse_build37.gff	fastq-illumina	c1	B
2	s2	s2.fq	mouse_build37.fasta	mouse_build37.gff	fastq-illumina	c2	B
3	s3	s3.fq	mouse_build37.fasta	mouse_build37.gff	fastq-illumina	c1	B
4	s4	s4.fq	mouse_build37.fasta	mouse_build37.gff	fastq-illumina	c2	B
</source>

	<p>In a design file 3 fields are mandatory:</p>
	<ul>
		<li><b>SampleNumber</b>: Numeric, must be unique and >0</li>
		<li><b>Name</b>: Name of the sample. Must be unique</li>
		<li><b>Reads</b>: Path to the reads data file. For backward compatibility with Eoulsan 1.0.x, this field can also be named <b>FileName</b>.</li>
	</ul>

	<p>User can add any additional field in this file. Some of the optional field are currently used in Eoulsan:</p>
	<ul>
		<li><b>Genome</b>: Path to genome file in fasta format</li>
		<li><b>Annotation</b>: Path to annotation file of the genome in GFF3 format</li>
		<li><b>Condition</b>: Condition for the sample in the experiment</li>
		<li><b>FastqFormat</b>: Fastq format. Currently Eoulsan 4 formats: fastq-sanger (default), fastq-solexa, fastq-illumina and fastq-illumina-1.5. See <a href="">Cock et al</a> for more information about the various fastq formats.</li>
		<li><b>ReplicateType</b>: Type of replicate, two values are currently handled: "B" for biological replicate and "T" for technical replicate.</li>
		<li><b>UUID</b>: Universal Unique Identifier of the sample. This field is generated by Eouslan createdesign command. In obfuscated design files, this value does not change.</li>
	</ul>
	
	<p>All paths in the design file can be URL and compressed files in gzip (.gz) or bzip2 (.bz2) are handled by Eoulsan.</p>
	<p><b>Note</b>: For some fields like genome or annotation, only one unique value is allowed for all the samples of the design file.</p>

		<subsection name="Paired-end support">
		
			<p>Paired-end files of a sample can be set between bracket and must be separated by a coma. The following design file show a example of design file with paired-end files:</p>
<source>
SampleNumber    Name    Reads   Genome  Annotation      FastqFormat     Condition       ReplicateType   UUID
1	s1	[s1a.fq.bz2,s1b.fq.bz2]	genome.fasta	annotation_only.gff	fastq-sanger	s1	B	705d190c-de47-4c4f-8ddf-881c9b89ca66
2	s2	[s2a.fq.bz2,s2b.fq.bz2]	genome.fasta	annotation_only.gff	fastq-sanger	s2	B	54c8833f-77e1-4e4f-90c2-742e459df7a7
</source>
		
		</subsection>
 
		<subsection name="Repository for genomes and annotation">
		
			<p>To avoid duplication of genome and annotation files, Eoulsan can access to repositories dedicated to for this types of data.
			To access to this repositories, Eoulsan support two protocols : <b>genome</b> and <b>annotation</b>.
			See the <a href="datarepositories.html">data repository</a> to see how define repositories.
			Here a sample of design file using <b>genome</b> and <b>annotation</b> protocols:</p>

<source>
SampleNumber	Name	Reads	Genome	Annotation	FastqFormat	Condition	ReplicateType
1	s1	s1.fq	genome://mouse	annotation://mouse	fastq-illumina	c1	B
2	s2	s2.fq	genome://mouse	annotation://mouse	fastq-illumina	c2	B
3	s3	s3.fq	genome://mouse	annotation://mouse	fastq-illumina	c1	B
4	s4	s4.fq	genome://mouse	annotation://mouse	fastq-illumina	c2	B
</source>
			 
		</subsection>

    </section>

  </body>
  
</document>
