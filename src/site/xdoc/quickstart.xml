<?xml version="1.0" encoding="UTF-8"?>
<!-- 
/*
 *                  Eoulsan development code
 *
 * This code may be freely distributed and modified under the
 * terms of the GNU Lesser General Public License version 2.1 or
 * later and CeCILL-C. This should be distributed with the code.
 * If you do not have a copy, see:
 *
 *      http://www.gnu.org/licenses/lgpl-2.1.txt
 *      http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.txt
 *
 * Copyright for this code is held jointly by the Genomic platform
 * of the Institut de Biologie de l'École Normale Supérieure and
 * the individual authors. These should be listed in @author doc
 * comments.
 *
 * For more information on the Eoulsan project and its aims,
 * or to join the Eoulsan Google group, visit the home page
 * at:
 *
 *      http://www.transcriptome.ens.fr/eoulsan
 *
 */
-->
<document>

	<properties>
		<title>Quickstart</title>
		<author email="jourdren@biologie.ens.fr">Laurent Jourdren</author>
	</properties>

	<body>

		<section name="Quickstart Guide">

			<ul>
				<li>
					<a href="#installation">Installation</a>
				</li>
				<li>
					<a href="#samples">Samples files</a>
				</li>
				<li>
					<a href="#design_file">Create design file</a>
				</li>
				<li>
					<a href="#parameter_file">Create parameter file</a>
				</li>
				<li>
					<a href="#local_mode">Execute Eoulsan in local mode</a>
				</li>
				<li>
					<a href="#hadoop_mode">Execute Eoulsan with a local hadoop cluster</a>
				</li>
				<li>
					<a href="#aws_mode">Execute Eoulsan on Amazon Web Services cloud</a>
				</li>
			</ul>


		<a name="installation"/>
		<subsection name="Installation">


			<p> To install Eoulsan, go to the
				<a href="installing.html">Eoulsan installation page</a>
				and follow the detail procedure.
			</p>
		</subsection>


		<a name="samples" />
                <subsection name="Sample files">

                        <p>We provide in this section some samples files to test Eoulsan. these files have been produced during a mouse RNASeq experiment.</p>


			<ul>
                          <li>Read files</li>
			  <ul>
				<li><a href="http://transcriptome.ens.fr/leburon/downloads/eoulsan-samples/s1.fq.bz2">Read file 1 (bzip2)</a></li>
                                <li><a href="http://transcriptome.ens.fr/leburon/downloads/eoulsan-samples/s2.fq.bz2">Read file 2 (bzip2)</a></li>
			  </ul>

			  <br/>
			  <li>Genome file</li>
			    <ul>
                              <li><a href="http://transcriptome.ens.fr/leburon/downloads/eoulsan-samples/genome.fasta.bz2">Genome file in fasta format (bzip2)</a></li>
                            </ul>

			  <br/>

			  <li>Annotation file</li>
			    <ul>
                              <li><a href="http://transcriptome.ens.fr/leburon/downloads/eoulsan-samples/annotation.gff.bz2">Annotation file in GFF3 format (bzip2)</a></li>
                            </ul>


			 <br/>
			 <li>Parameters files<br/>
			    The following files are sample parameter files to analyse previous reads files. There is 2 files, 
                            one for local analysis which include differential analysis and one for distributed (on cluster 
                            or cloud computing facilities) without differential analysis as this last steps are performed 
                            only on local computer.</li>

			  <ul>
				<li><a href="http://transcriptome.ens.fr/leburon/downloads/eoulsan-samples/param-local.xml">Parameter file for local analysis</a></li>
                                <li><a href="http://transcriptome.ens.fr/leburon/downloads/eoulsan-samples/param-hadoop.xml">Parameter file for distributed analysis (without differential analysis).</a></li>
			  </ul>
			</ul>

		</subsection>

		<a name="design_file"/>
		<subsection name="Create a design file">

			<p>In an empty directory, copy the reads, genome and annotation files, then you can create a design file with the next command:</p>
<source>
$ eoulsan.sh createdesign *.fq.bz2 genome.fasta annotation.gff.bz2
</source>

			<p>You can now modify the design file to add additional information. Note that Eoulsan currently does not handle compressed genome file.</p>

		</subsection>



		<a name="param_file"/>
		<subsection name="Create parameter file">

			<p>To create a parameter file, the best solution is to reuse an existing 
			parameter file (see <a href="#samples">sample section</a>) and adapt it 
			to your needs.</p>

			<p>The parameter file contains the list of the steps that will be executed 
			by Eoulsan. Some step are only available in local mode (like 
                        differential analysis) or in distributed mode, see the <a href="steps.html">steps page</a>
			for more details. For each step you can change, add or remove parameters. 
			Parameters are specific to a step, consult the <a href="steps.html">documentation</a> 
			of the built-in steps for the list of available parameters of each step.</p>


			<p>At least, there is a global section in the parameter file that override the 
			values of Eoulsan configuration file. This section is useful to set for example 
			the path of the temporary directory to use.</p>

		</subsection>

		<a name="local_mode"/>
		<subsection name="Launch Eoulsan in local mode">

			<p>Once your design file and parameter file are ready, you can launch Eoulsan analysis with the following command:</p>
<source>
$ eoulsan.sh exec param.xml design.txt
</source>


			<p>Once started and before starting analysis, Eoulsan will check if:</p>
			<ul>
			  <li>The design file and parameter file are valid</li>
			  <li>All the steps exits</li>
			  <li>The parameter of all the steps are valid</li>
			  <li>The order of the steps is correct (a step can not use data generated after its end)</li>
			  <li>The input files are valid (fasta and annotation files)</li>
			  <li>A genome mapper index is needed. In this case, a step to generated this index is added</li>
			</ul>
			
			<p>If successful, you wil obtain a new directory name like <b>eoulsan-20110310-101235</b> 
			with log files about the analysis. Results files are stored in the current directory of the user.</p>

		</subsection>

		<a name="hadoop_mode"/>
		<subsection name="Launch Eoulsan in local hadoop cluster mode">

			<p>First, you must have a configurated Hadoop cluster (see <a href="hadoopmode.html">hadoop configuration</a>). 
			   You can launch Eoulsan analysis with the following command:</p>
<source>
$ eoulsan.sh hadoopexec param.xml design.txt hdfs://master.example.com/test
</source>

			<p>At the start of the analysis and after the check of the input files (like 
			in the local mode), input data are uploaded on the hadoop cluster before 
                        launching the analysis.</p>

			<p>At the end of the analysis, the results files and logs will be in a new directory name like 
			   <b>eoulsan-20110310-101235</b> (the numbers in the directory name after eoulsan are 
                           respectively the date and the time of the launch of the analysis).</p>

		</subsection>

		<a name="aws_mode"/>
		<subsection name="Launch Eoulsan on Amazon Web Service Cloud">

			<p>You must have an AWS account for Amazon S3 and Amazon 
			   MapReduce to launch Eoulsan on Amazon cloud. You can register to Amazon Web Services here:</p>

			<ul>
				<li>Create an <a href="https://aws-portal.amazon.com/gp/aws/developer/registration/index.html">AWS account</a></li>
				<li>Sign up for <a href="https://aws-portal.amazon.com/gp/aws/developer/subscription/index.html?productCode=AmazonS3">Amazon S3</a></li>
				<li>Sign up for <a href="https://aws-portal.amazon.com/gp/aws/developer/subscription/index.html?productCode=ElasticMapReduce">Amazon Elastic MapReduce</a></li>
			</ul>


			<p>Then you 
                           must set Amazon credentials in Eoulsan configuration or 
			   in the parameter file (see <a href="./awsmode.html">AWS configuration</a>). 
			   You can launch Eoulsan analysis with the following command:</p>
<source>
$ eoulsan.sh awsexec param.xml design.txt s3://mybucket/test
</source>

			<p> <b>Note:</b> In the sample URL <code>s3://mybucket/test</code>, <code>mybucket</code> 
			is the name of your S3 bucket and <code>/test</code> is the path of the data in S3 your bucket.</p>

			<p>In AWS mode, there is 2 phases in the analysis:</p>
			<ul>
				<li>First data to analyse, design and parameter files are upload to your S3 
                                    bucket on Amazon Cloud.</li>
				<li>Then, the cluster in the cloud is created and the "real" analysis starts. 
                                    Eoulsan on your local computer only wait the end of the analysis. 
                                    You can quit Eoulsan or shutdown your computer, no data will be lost and 
                                    analysis will continue on the cloud.</li>
			</ul>


			<p>At the end of the analysis, the results files and logs will be in a new directory 
                           in your S3 bucket named like <b>eoulsan-20110310-101235</b> (the numbers in the 
                           directory name after eoulsan are respectively the date and the time of the launch 
                           of the analysis). You must manually download these data from S3 to your computer.</p>

		</subsection>
	</section>

	</body>
</document>

